


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Points in Polygon Analysis &mdash; QGIS Tutorials and Tips</title>
    
    <link rel="stylesheet" href="../_static/greencloud.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Noticia+Text|Open+Sans|Droid+Sans+Mono" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/jquery.cookie.js"></script>
    <script type="text/javascript" src="../_static/cloud.js"></script>
    <link rel="top" title="QGIS Tutorials and Tips" href="../index.html" />
    <link rel="next" title="Creating Heatmaps" href="creating_heatmaps.html" />
    <link rel="prev" title="Performing Table Joins" href="performing_table_joins.html" />
 
        <meta name="viewport" content="width=device-width, initial-scale=1"><script type="text/javascript">
var ga_enabled = !$.cookie('disable-ga');
if(ga_enabled){
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-690672-13']);
  _gaq.push(['_setCookiePath', '/']);
  _gaq.push(['_setDetectFlash', false]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
}
</script>
<!-- Place this tag after the last widget tag. -->
<script type="text/javascript">
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>

  </head>
  <body>
    <div class="relbar-top">
        
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="creating_heatmaps.html" title="Creating Heatmaps"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="performing_table_joins.html" title="Performing Table Joins"
             accesskey="P">previous</a> &nbsp; &nbsp;</li>
    <li><a href="../index.html">QGIS Tutorials and Tips</a> &raquo;</li>
 
      </ul>
    </div>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="points-in-polygon-analysis">
<h1>Points in Polygon Analysis<a class="headerlink" href="#points-in-polygon-analysis" title="Permalink to this headline">¶</a></h1>
<p>[ Download PDF <a class="reference external" href="../pdf/points_in_polygon_a4.pdf">A4</a> <a class="reference external" href="../pdf/points_in_polygon_letter.pdf">Letter</a> ]</p>
<p>The power of GIS lies in analysing multiple data sources together. Often the
answer you are seeking lies in many different layers and you need to do some
analysis to extract and compile this information. One such type of analysis is
<strong>Points-in-Polygon</strong>. When you have a polygon layer and a point layer - and
want to know how many or which of the points fall within the bounds of each
polygon, you can use this method of analysis.</p>
<div class="section" id="overview-of-the-task">
<h2>Overview of the task<a class="headerlink" href="#overview-of-the-task" title="Permalink to this headline">¶</a></h2>
<p>Given the locations of all known significant earthquakes, we will try to find
out which country has had the highest number of earthquakes.</p>
</div>
<div class="section" id="get-the-data">
<h2>Get the data<a class="headerlink" href="#get-the-data" title="Permalink to this headline">¶</a></h2>
<p>We will use NOAA’s National Geophysical Data Center’s <a class="reference external" href="http://www.ngdc.noaa.gov/nndc/struts/form?t=101650&amp;s=1&amp;d=1">Significant Earthquake
Database</a> as our
layer represenging all major earthquakes. Download the <a class="reference external" href="http://www.ngdc.noaa.gov/nndc/struts/results?type_0=Exact&amp;query_0=$ID&amp;t=101650&amp;s=13&amp;d=189&amp;dfn=signif.txt">tab-delimited
earthquake data</a>.</p>
<p>Natural Earth has <a class="reference external" href="http://www.naturalearthdata.com/downloads/10m-cultural-vectors/">Admin 0 - Countries</a>
dataset. Download the <a class="reference external" href="http://www.naturalearthdata.com/http//www.naturalearthdata.com/download/10m/cultural/ne_10m_admin_0_countries.zip">countries</a></p>
<p>For convenience, you may directly download a copy of both the datasets from the links
below:</p>
<p><a class="reference download internal" href="../_downloads/signif1.txt"><tt class="xref download docutils literal"><span class="pre">signif.txt</span></tt></a></p>
<p><a class="reference download internal" href="../_downloads/ne_10m_admin_0_countries.zip"><tt class="xref download docutils literal"><span class="pre">ne_10m_admin_0_countries.zip</span></tt></a></p>
</div>
<div class="section" id="procedure">
<h2>Procedure<a class="headerlink" href="#procedure" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Open <em class="menuselection">Layer ‣ Add Delimited Text Layer</em> and browse to the
downloaded <tt class="docutils literal"><span class="pre">signif.txt</span></tt> file.</li>
</ol>
<img alt="../_images/129.png" class="align-center" src="../_images/129.png" style="width: 700px;" />
<ol class="arabic simple" start="2">
<li>Since this is a <em>tab-delimited file</em>, choose <em class="guilabel">Tab</em> as the
<em class="guilabel">File format</em>. The <em class="guilabel">X field</em> and <em class="guilabel">Y field</em>
would be auto-populated. Click <em class="guilabel">OK</em>.</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You may see some error messages as QGIS tries to import the file. These are
valid errors and some rows from the file will not be imported. You can ignore
the errors for the purpose of this tutorial.</p>
</div>
<img alt="../_images/210.png" class="align-center" src="../_images/210.png" style="width: 675px;" />
<ol class="arabic simple" start="3">
<li>As the earthquake dataset has Latitude/Longitude coordinates, choose
<em class="guilabel">WGS 84 EPSG:436</em> as the CRS in the <em class="guilabel">Coordinate Reference System Selector</em>
dialog.</li>
</ol>
<img alt="../_images/39.png" class="align-center" src="../_images/39.png" style="width: 500px;" />
<ol class="arabic simple" start="4">
<li>The earthquake point layer would now be loaded and displayed in QGIS. Let&#8217;s
also open the Countries layer. Go to <em class="menuselection">Layer ‣ Add Vector Layer</em>.
Browse to the downloaded <tt class="docutils literal"><span class="pre">ne_10m_admin_0_countries.zip</span></tt> file and
click <em class="guilabel">Open</em>. Select the <tt class="docutils literal"><span class="pre">ne_10m_admin_0_countries.shp</span></tt> as
the layer in the <em class="guilabel">Select layers to add...</em> dialog.</li>
</ol>
<img alt="../_images/49.png" class="align-center" src="../_images/49.png" style="width: 600px;" />
<ol class="arabic simple" start="5">
<li>Click on <em class="menuselection">Vector ‣ Analysis Tools ‣ Point in Polygon</em></li>
</ol>
<img alt="../_images/59.png" class="align-center" src="../_images/59.png" style="width: 700px;" />
<ol class="arabic simple" start="6">
<li>In th pop-up window, select the polygon layer and point layer respectively.
Name the output layer as <tt class="docutils literal"><span class="pre">earthquake_per_coutry.shp</span></tt> and Click <em class="guilabel">OK</em>.</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Be patient after clicking OK, QGIS may take upto 10 minutes to calculate the
results.</p>
</div>
<ol class="arabic simple" start="7">
<li>When asked whether you want to add the layer to TOC, click <em class="guilabel">Yes</em>.</li>
</ol>
<img alt="../_images/78.png" class="align-center" src="../_images/78.png" style="width: 400px;" />
<ol class="arabic simple" start="8">
<li>You will see a new layer is added to the table of content. Open the
attribute table by right-clicking on the layer and selecting <em class="guilabel">Open
Attribute Table</em>.</li>
</ol>
<img alt="../_images/88.png" class="align-center" src="../_images/88.png" style="width: 700px;" />
<ol class="arabic simple" start="9">
<li>In the attribute table, you will notice a new field named <tt class="docutils literal"><span class="pre">PNTCNT</span></tt>. This is
the count of number of points from the earthquakes layer that fall within
each polygon.</li>
</ol>
<img alt="../_images/98.png" class="align-center" src="../_images/98.png" style="width: 700px;" />
<ol class="arabic simple" start="10">
<li>To get our answer, we can simply sort the table by <tt class="docutils literal"><span class="pre">PNTCNT</span></tt> field and the
country with highest count will be our answer. Click 2-times on the <tt class="docutils literal"><span class="pre">PNTCNT</span></tt>
columnto get it sorted in descending order. Click on the first row to
select it and close the Attribute Table.</li>
</ol>
<img alt="../_images/108.png" class="align-center" src="../_images/108.png" style="width: 700px;" />
<ol class="arabic simple" start="11">
<li>Back in  the main QGIS window, you will see one feature highlighted in
yellow. This is the feature linked to the selected row in the attribute
table which had the highest number of points. Select the
<em class="guilabel">Identify</em> tool and click on that polygon. You can see that the
country with the highest number of Significant earthquakes is <strong>China</strong>.</li>
</ol>
<img alt="../_images/1113.png" class="align-center" src="../_images/1113.png" style="width: 700px;" />
<p>We determined from the simple analysis of 2 datasets that China has had
the highest number of major earthquakes. You may refine this analysis further
by taking into consideration the population as well as the size of the country
and determine which is the most adversely affected country by major
earthquakes.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper"><h3>Questions/Comments?</h3>
<p>Send me a message via my Google+ profile.</p>
<br>
<div class="g-person" data-width="200" data-href="//plus.google.com/116912222767108657277" data-theme="dark" data-showcoverphoto="false" data-rel="author"></div>
<h3><a href="../index.html">Table Of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="making_a_map.html">Making a Map</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_attributes.html">Working with Attributes</a></li>
<li class="toctree-l1"><a class="reference internal" href="importing_spreadsheets_csv.html">Importing Spreadsheets or CSV files</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_plugins.html">Using Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_vector_styling.html">Basic Vector Styling</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_styling_and_analysis.html">Basic Raster Styling and Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_mosaicing_and_clipping.html">Raster Mosaicing and Clipping</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_terrain.html">Working with Terrain Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_wms.html">Working with WMS Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="georeferencing_basics.html">Georeferencing Topo Sheets and Scanned Maps</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_georeferencing.html">Georeferencing Aerial Imagery</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_table_joins.html">Performing Table Joins</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Points in Polygon Analysis</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="creating_heatmaps.html">Creating Heatmaps</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_spatial_queries.html">Performing Spatial Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="nearest_neighbor_analysis.html">Nearest Neighbor Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="teach_qgis.html">Teaching QGIS</a></li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/docs/points_in_polygon.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="relbar-bottom">
        
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="creating_heatmaps.html" title="Creating Heatmaps"
             >next</a></li>
        <li class="right" >
          <a href="performing_table_joins.html" title="Performing Table Joins"
             >previous</a> &nbsp; &nbsp;</li>
    <li><a href="../index.html">QGIS Tutorials and Tips</a> &raquo;</li>
 
      </ul>
    </div>
    </div>

    <div class="footer">
        &copy; Copyright 2013, Ujaval Gandhi.
      Last updated on Mar 12, 2014.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div><script type="text/javascript">
    if(ga_enabled){
        document.write("<div class=\"footer\">This page uses <a href=\"http://analytics.google.com\">Google Analytics</a> to collect statistics. ");
        document.write("Click <button title=\"set cookie to disable analytics for this site\" class=\"link\" onclick=\"$.cookie('disable-ga', 'true', {expires: 3650, path: '/'}); window.location.reload(); return false; \">here</button> to disable analytics for this site.");
        document.write("</div>");
    }else{
        document.write("<div class=\"footer\">Google Analytics has been disabled. ");
        document.write("Click <button title=\"set cookie to re-enable analytics for this site\" class=\"link\" onclick=\"$.cookie('disable-ga', null, {path: '/'}); window.location.reload(); return false; \">here</button> to re-enable analytics for this site.");
    };
</script>
    <!-- cloud_sptheme 1.4 -->
  </body>
</html>