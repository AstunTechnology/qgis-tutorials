<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Criando Mapas de Calor &mdash; QGIS Tutorials and Tips</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootswatch-3.1.0/united/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="QGIS Tutorials and Tips" href="../index.html" />
    <link rel="next" title="Performing Spatial Queries" href="performing_spatial_queries.html" />
    <link rel="prev" title="Points in Polygon Analysis" href="points_in_polygon.html" />

<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-690672-13', 'qgistutorials.com');
  ga('require', 'displayfeatures');
  ga('send', 'pageview');
</script>

  </head>
  <body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html"><img src="../_static/logo.png">
          QGIS Tutorials and Tips</a>
        <span class="navbar-text navbar-version pull-left"><b>v1.0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Tutorials List <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introdução</a></li>
<li class="toctree-l1"><a class="reference internal" href="making_a_map.html">Making a Map</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_attributes.html">Working with Attributes</a></li>
<li class="toctree-l1"><a class="reference internal" href="importing_spreadsheets_csv.html">Importing Spreadsheets or CSV files</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_plugins.html">Using Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="downloading_osm_data.html">Searching and Downloading OpenStreetMap Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_vector_styling.html">Basic Vector Styling</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculating_line_lengths.html">Calculating Line Lengths and Statistics</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_styling_and_analysis.html">Basic Raster Styling and Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_mosaicing_and_clipping.html">Raster Mosaicing and Clipping</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_terrain.html">Working with Terrain Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_wms.html">Working with WMS Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="georeferencing_basics.html">Georeferencing Topo Sheets and Scanned Maps</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_georeferencing.html">Georeferencing Aerial Imagery</a></li>
<li class="toctree-l1"><a class="reference internal" href="digitizing_basics.html">Digitizing Map Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_table_joins.html">Performing Table Joins</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_spatial_joins.html">Performing Spatial Joins</a></li>
<li class="toctree-l1"><a class="reference internal" href="points_in_polygon.html">Points in Polygon Analysis</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Criando Mapas de Calor</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_spatial_queries.html">Performing Spatial Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="nearest_neighbor_analysis.html">Nearest Neighbor Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="sampling_raster_data.html">Sampling Raster Data using Points or Polygons</a></li>
<li class="toctree-l1"><a class="reference internal" href="interpolating_point_data.html">Interpolating Point Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="batch_processing.html">Batch Processing using Processing Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_graphical_modeler.html">Automating Complex Workflows using Processing Modeler</a></li>
<li class="toctree-l1"><a class="reference internal" href="automating_map_creation.html">Automating Map Creation with Print Composer Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_qgis_browser.html">Using the QGIS Browser</a></li>
<li class="toctree-l1"><a class="reference internal" href="counting_vertices.html">Counting Number of Vertices in a Layer</a></li>
<li class="toctree-l1"><a class="reference internal" href="open_bil_bip_bsq_files.html">Open BIL, BIP or BSQ files in QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started_with_pyqgis.html">Getting Started With Python Programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="building_a_python_plugin.html">Building a Python Plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="find_neighbor_polygons.html">Find Neighbor Polygons in a Layer</a></li>
<li class="toctree-l1"><a class="reference internal" href="leaflet_maps_with_qgis2leaf.html">Leaflet Web Maps with qgis2leaf</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_gme_connector.html">Using Google Maps Engine Connector for QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="learning_resources.html">QGIS Learning Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="teach_qgis.html">Teaching QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="credits.html">Créditos</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="points_in_polygon.html" title="Previous Chapter: Points in Polygon Analysis"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm">&laquo; Points in Polygo...</span>
    </a>
  </li>
  <li>
    <a href="performing_spatial_queries.html" title="Next Chapter: Performing Spatial Queries"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm">Performing Spati... &raquo;</span>
    </a>
  </li>
              
            
            

            
<form role="form" class="navbar-form navbar-right">
<select id="languages" class="form-control select-mini">
  <option value="en">English</option>
  <option value="ro">Romanian</option>
  <option value="fi_FI">Finnish</option>
  <option value="it">Italian</option>
  <option value="nl">Dutch</option>
  <option value="es">Spanish</option>
  <option value="ru">Russian</option>
  <option value="pt_BR">Portuguese</option>
  <option value="fr">French</option>
  <option value="ko">Korean</option>
  <option value="el">Greek</option>
  <option value="de">German</option>
</select>
</form>

            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><h4>Author</h4>
<div class="g-person" data-width="250" data-href="//plus.google.com/u/0/116912222767108657277" data-showtagline="false" data-showcoverphoto="false" data-rel="author"></div>

<h4>Share</h4>
<div class="addthis_sharing_toolbox"></div>
        </div>
      </div>
    <div class="col-md-9">
      

  <div class="section" id="creating-heatmaps">
<h1>Criando Mapas de Calor<a class="headerlink" href="#creating-heatmaps" title="Link permanente para este título">¶</a></h1>
<p>[ Download PDF <a class="reference external" href="../pdf/creating_heatmaps_a4.pdf">A4</a> <a class="reference external" href="../pdf/creating_heatmaps_letter.pdf">Letter</a> ]</p>
<p>Mapas de calor são uma das melhores ferramentas de visualização de dados de densidade de pontos. Mapas de calor são utilizados para identificar facilmente aglomerados e encontrar onde existe uma elevada concentração de uma determinada atividade. eles também são úteis para fazer <cite>análises de cluster</cite> ou <cite>análise de pontos de calor  - hotspot analysis -</cite></p>
<div class="section" id="overview-of-the-task">
<h2>Visão geral da tarefa<a class="headerlink" href="#overview-of-the-task" title="Link permanente para este título">¶</a></h2>
<p>Vamos trabalhar com um conjunto de dados dos locais de crimes em Surrey, Reino Unido para o ano de 2011 e encontrar hotspots de criminalidade no município.</p>
</div>
<div class="section" id="get-the-data">
<h2>Obter os dados<a class="headerlink" href="#get-the-data" title="Link permanente para este título">¶</a></h2>
<p>A central de armazenamento de dados de Londres fornece os dados brutos a parti do Police.uk um site de mapeamento de crimes. &lt;<a class="reference external" href="http://data.london.gov.uk/datastore/package/policeuk-crime-data">http://data.london.gov.uk/datastore/package/policeuk-crime-data</a>&gt;`_.</p>
<p>Faça o download dos  <a class="reference external" href="http://data.london.gov.uk/datafiles/crime-community-safety/police-uk-crime-data-surrey.zip">dados de Surrey</a>.</p>
<p>For convenience, you can directly download the sample data used in this
tutorial from link below.</p>
<p><a class="reference download internal" href="../_downloads/police-uk-crime-data-surrey.zip"><tt class="xref download docutils literal"><span class="pre">police-uk-crime-data-surrey.zip</span></tt></a></p>
</div>
<div class="section" id="procedure">
<h2>Procedimento<a class="headerlink" href="#procedure" title="Link permanente para este título">¶</a></h2>
<ol class="arabic simple">
<li><p class="first">Para iniciar, descompacte os dados para uma pasta. Os dados estão em formato CVS. Nós vamos importar esses dados para o QGIS. (ver <a class="reference internal" href="importing_spreadsheets_csv.html"><em>Importing Spreadsheets or CSV files</em></a>. para mais detalhes). Click :menuselection:<a href="#id1"><span class="problematic" id="id2">`</span></a>Camada &#8211;&gt; Criar uma camada a partir de arquivos de texto delimitado</p>
</li>
</ol>
<img alt="../_images/126.png" class="align-center" src="../_images/126.png" />
<ol class="arabic simple" start="2">
<li><p class="first">Procure pelo arquivo <cite>police-uk-crime-data-surrey.txt</cite> em seu computador e abra ele. Selecione :guilabel: <cite>CSV (texto separado por delimitador)</cite> para o formato de arquivo. Você vai ver as colunas <em>Easting</em> e <em>Northing</em> selecionadas automaticamente nos campos X e Y. Certifique-se de verificar se opção <em class="guilabel">Usar índice espacial</em> está marcada, pois isso vai acelerar suas opções nesta camada. Click <em class="guilabel">OK</em>.</p>
</li>
</ol>
<img alt="../_images/217.png" class="align-center" src="../_images/217.png" />
<ol class="arabic simple" start="3">
<li><p class="first">Você pode ver alguns erros. Pode ignorá-los para os fins do presente tutorial. Click <em class="guilabel">Fechar</em>.</p>
</li>
</ol>
<img alt="../_images/310.png" class="align-center" src="../_images/310.png" />
<ol class="arabic simple" start="4">
<li><p class="first">Agora você precisa escolher o <cite>Sistemas de Referência de Coordenadas  (SRC)</cite>. se você ler a descrição dos dados, você verá que o sistema de referência dessa camada é <em>British National Grid</em>. Escolha <em class="guilabel">OSGB 1936 / British National Grid</em> como SRC. Click <em class="guilabel">OK</em>.</p>
</li>
</ol>
<img alt="../_images/47.png" class="align-center" src="../_images/47.png" />
<ol class="arabic simple" start="5">
<li><p class="first">Agora você vai ver os dados carregados no QGIS.</p>
</li>
</ol>
<img alt="../_images/57.png" class="align-center" src="../_images/57.png" />
<ol class="arabic simple" start="6">
<li><p class="first">Aproxime um pouco mais para obter uma melhor visualização dos dados. Você vai notar que há uma grande densidade de dados e é difícil ter uma ideia de onde há uma grande concentração de pontos. É nessas situações que o mapa de calor vai ser muito útil.</p>
</li>
</ol>
<img alt="../_images/66.png" class="align-center" src="../_images/66.png" />
<ol class="arabic simple" start="7">
<li><p class="first">Para criar o mapa de calor, você precisa habilitar o complemento chamado &#8220;mapa de calor&#8221; Veja <a class="reference internal" href="using_plugins.html"><em>Using Plugins</em></a> para saber como ativar Plugins embutidos. Uma vez que você tenha ativado o plugin, vá para <em class="menuselection">Raster ‣ Mapa de Calor ‣ Mapa de Calor</em>.</p>
</li>
</ol>
<img alt="../_images/76.png" class="align-center" src="../_images/76.png" />
<ol class="arabic simple" start="8">
<li><p class="first">Na caixa de dialogo Em <em class="guilabel">Complemento mapa de calor</em> , escolha <cite>crime_heatmap</cite> como nome no campo <em class="guilabel">Raster de saída</em>. Entre com <cite>1000</cite> unidades do mapa em <em class="guilabel">Raio</em>. O Raio é a área em torno de cada ponto que será utilizado para calcular o <cite>calor</cite> a ser recebido pelo pixel. Marque a <em class="guilabel">Avançado</em> para que possamos especificar o tamanho do nosso mapa de calor. Digite <cite>100</cite> na <em class="guilabel">Tam. da célula X</em> e <em class="guilabel">Tam. da célula  Y</em>. Click <em class="guilabel">OK</em>.</p>
</li>
</ol>
<img alt="../_images/86.png" class="align-center" src="../_images/86.png" />
<ol class="arabic simple" start="9">
<li><p class="first">Uma vez que o processo tenha terminado, você verá um mapa de calor em escala de cinza carregado na sua tela.</p>
</li>
</ol>
<img alt="../_images/96.png" class="align-center" src="../_images/96.png" />
<ol class="arabic simple" start="10">
<li><p class="first">Vamos fazer o nosso mapa de calor ficar mais parecido com os mapas de calor tradicionais que muitas vezes você vê. Clique com o botão direito na camada do mapa de calor e clique em <em class="guilabel">Propriedades</em>.</p>
</li>
</ol>
<img alt="../_images/106.png" class="align-center" src="../_images/106.png" />
<ol class="arabic simple" start="11">
<li>In the <em class="guilabel">Style</em> tab, select <em class="guilabel">Singleband pseudocolor</em> as the <em class="guilabel">Render type</em>. Next, under the section <em class="guilabel">Load min/max values</em>, select the <em class="guilabel">Actual (slower)</em> as the <em class="guilabel">Accuracy</em> and click <em class="guilabel">Load</em>. This will scan the heatmap and find the minimum and maximum pixel values. These values will be used to generate an appropriate color ramp. In the section <em class="guilabel">Generate new color map</em>, select <em class="guilabel">YlOrRd</em> (Yellow-Orange-Red) as the color ramp, and click <em class="guilabel">Classify</em>. Click <em class="guilabel">OK</em>.</li>
</ol>
<img alt="../_images/1110.png" class="align-center" src="../_images/1110.png" />
<ol class="arabic simple" start="12">
<li>Now you will see a more appealing heatmap-like rendering of the layer. You can select the <em class="guilabel">Identify</em> tool and click on any pixel of the heatmap. You will see the pixel value in the resulting pop-up. This pixel-value is a measure of how many points from the source layer are contained within the specified radius ( in our case - 1000m) around the pixel.</li>
</ol>
<img alt="../_images/127.png" class="align-center" src="../_images/127.png" />
<ol class="arabic simple" start="13">
<li>Now you have your heatmap. It is useful for visual interpretation, but not very useful if you want to use these results in analysis. Many times, you want to identify the <cite>hotspots</cite> where there is high-concentration of points. We will now try to identify such <cite>hotspots</cite> using this heatmap. Go to <em class="menuselection">Raster ‣ Raster Calculator</em>.</li>
</ol>
<img alt="../_images/136.png" class="align-center" src="../_images/136.png" />
<ol class="arabic simple" start="14">
<li>You will have to decide on a threshold value first. All pixel values above that threshold will be considered to be in a cluster. Let&#8217;s use a value of 5 for this data. In <em class="guilabel">Raster calculator</em> dialog, name the output layer as <cite>crime_hotspots</cite>. Double-click on <em class="guilabel">crime_heatmap&#64;1</em> under the <em class="guilabel">Raster bands</em> section and it will be added to the <em class="guilabel">Raster calculator expression</em> textarea. Complete the expression as <cite>&#8220;crime_heatmap&#64;1&#8221; &gt; 5</cite>. Check the box next to <em class="guilabel">Add result to project</em> and <em class="guilabel">OK</em>.</li>
</ol>
<img alt="../_images/146.png" class="align-center" src="../_images/146.png" />
<ol class="arabic simple" start="15">
<li>A new layer will be added to QGIS. This layer has pixels with values of either 0 or 1. All pixels in the input layer where the pixel value was larger than 5 now have a value of 1 and all remianing pixels are 0. Click on <em class="menuselection">Raster ‣ Conversion ‣ Polygonize (Raster to Vector)</em>.</li>
</ol>
<img alt="../_images/156.png" class="align-center" src="../_images/156.png" />
<ol class="arabic simple" start="16">
<li>Name the output file as <em class="guilabel">crime_hotspots_vector</em>. Check the box next to <em class="guilabel">Field name</em> as well as <em class="guilabel">Load into canvas when finished</em>. Click <em class="guilabel">OK</em>.</li>
</ol>
<img alt="../_images/166.png" class="align-center" src="../_images/166.png" />
<ol class="arabic simple" start="17">
<li>Once the conversion finishes, you will have yet another layer added to QGIS. This is the vector representation of the clusters that were created in the previous step. The layers contain clusters with both 0 and 1 values. Let&#8217;s filter out the 0 values, so we get the clusters of hotspots. Right-click on the layer and select <em class="guilabel">Open Attribute Table</em>.</li>
</ol>
<img alt="../_images/175.png" class="align-center" src="../_images/175.png" />
<ol class="arabic simple" start="18">
<li>In the <em class="guilabel">Attribute table</em>, click on <em class="guilabel">Select feature using an expression</em>.</li>
</ol>
<img alt="../_images/186.png" class="align-center" src="../_images/186.png" />
<ol class="arabic simple" start="19">
<li>Enter the expression as <cite>&#8220;DN&#8221; = 1</cite> and click <em class="guilabel">Select</em>. Next, click on <em class="guilabel">Close</em>.</li>
</ol>
<img alt="../_images/194.png" class="align-center" src="../_images/194.png" />
<ol class="arabic simple" start="20">
<li>In the main QGIS window, you will see some features highlighted in yellow. These are the features that matched our query. Right-click on the layer and select <em class="guilabel">Save Selection As...</em>.</li>
</ol>
<img alt="../_images/202.png" class="align-center" src="../_images/202.png" />
<ol class="arabic simple" start="21">
<li>Name the output layer as <cite>crime_clusters</cite>. Check the box next to <em class="guilabel">Add saved file to map</em> and click <em class="guilabel">OK</em>.</li>
</ol>
<img alt="../_images/218.png" class="align-center" src="../_images/218.png" />
<ol class="arabic simple" start="22">
<li>There you have it. The final layer contains the <cite>hotspots</cite> extracted from the heatmap. These clusters are the <em>intelligence</em> gathered from the raw data and  can provide useful insights as well as serve as an input for further action.</li>
</ol>
<img alt="../_images/222.png" class="align-center" src="../_images/222.png" />
</div>
</div>





  <div id="disqus_thread"></div>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


    </div>
      
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2015, Ujaval Gandhi.<br/>
      Última atualização em May 03, 2015.<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.2.<br/>
    </p>
  </div>
</footer>
<!-- Google+ Badge -->
<script type="text/javascript">
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>

<!-- Disqus comments widget -->
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'qgistutorials'; // required: replace example with your forum shortname
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  }());
</script>

<script type="text/javascript">
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>

<!-- Go to www.addthis.com/dashboard to customize your tools -->
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=spatialthoughts" async="async"></script>

<!-- Script fpr language switching. Largely adapted from https://github.com/pcav/faunalia-website -->
<script>
    var currentPage = 'docs/creating_heatmaps.html'; // coming from sphinx, always without starting '/'
    var currentLang = 'en';
    $(document).ready(function(){

        var search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
        var langPlusPage = window.location.href.match(search);
        // it's possible this is a index.html page called without 'index.html', try without the currentPage
        if (langPlusPage==undefined){
            search = new RegExp('\/[a-zA-Z_]{2,8}\/$', 'gi');
            langPlusPage = window.location.href.match(search);
        }

        // it's possible this is an index.html page called without 'index.html', try removing index.html
        if (langPlusPage==undefined){
            currentPage = currentPage.replace('index.html','')
            search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
            langPlusPage = window.location.href.match(search);
        }
        // still no langPlugPage: stop, because the language swicher will misbehave 

        if (langPlusPage == undefined || langPlusPage.length != 1){
            alert('You hit an error, please report back to us.');
            return;
        }
        langPlusPage = langPlusPage[0];
        currentLang = langPlusPage.replace(currentPage, '');

        $("#languages").val(currentLang.replace(/\//g,'')); // currentLang is something like '/nl/'

        $("#languages").change(function() {
            gotoLang($(this).val());
        });

    });

    // load current page in a different language
    function gotoLang(lang){
        var currentUrl = window.location.href;
        var newUrl = currentUrl.replace(currentLang, '/'+lang+'/');
        window.location.href = newUrl;
    }
</script>

  </body>
</html>