<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>連接資料表 &mdash; QGIS Tutorials and Tips</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootswatch-3.2.0/united/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.2.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="QGIS Tutorials and Tips" href="../index.html" />
    <link rel="next" title="Performing Spatial Joins" href="performing_spatial_joins.html" />
    <link rel="prev" title="把地圖數位化" href="digitizing_basics.html" />

<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-690672-13', 'qgistutorials.com');
  ga('require', 'displayfeatures');
  ga('send', 'pageview');
</script>


  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html"><img src="../_static/logo.png">
          QGIS Tutorials and Tips</a>
        <span class="navbar-text navbar-version pull-left"><b>v1.0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Tutorials List <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">簡介</a></li>
<li class="toctree-l1"><a class="reference internal" href="making_a_map.html">製作地圖</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_attributes.html">屬性的操作</a></li>
<li class="toctree-l1"><a class="reference internal" href="importing_spreadsheets_csv.html">匯入工作表或 CSV 檔</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_plugins.html">使用附加元件</a></li>
<li class="toctree-l1"><a class="reference internal" href="downloading_osm_data.html">搜尋和下載開放街圖資料</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_vector_styling.html">基本向量資料樣式設定</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculating_line_lengths.html">計算線段的長度和統計資訊</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_styling_and_analysis.html">網格式影像的基本分析與樣式設定</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_mosaicing_and_clipping.html">網格式影像的拼貼與裁切</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_terrain.html">地形資料的操作</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_wms.html">WMS 資料的操作</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_projections.html">投影的操作</a></li>
<li class="toctree-l1"><a class="reference internal" href="georeferencing_basics.html">為紙本地圖進行空間對位</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_georeferencing.html">為空照圖進行空間對位</a></li>
<li class="toctree-l1"><a class="reference internal" href="digitizing_basics.html">把地圖數位化</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">連接資料表</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_spatial_joins.html">Performing Spatial Joins</a></li>
<li class="toctree-l1"><a class="reference internal" href="points_in_polygon.html">找出在多邊形中的點</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_heatmaps.html">製作熱區圖</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_spatial_queries.html">空間查詢</a></li>
<li class="toctree-l1"><a class="reference internal" href="nearest_neighbor_analysis.html">Nearest Neighbor Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="sampling_raster_data.html">Sampling Raster Data using Points or Polygons</a></li>
<li class="toctree-l1"><a class="reference internal" href="interpolating_point_data.html">點資料內插法</a></li>
<li class="toctree-l1"><a class="reference internal" href="batch_processing.html">Batch Processing using Processing Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_graphical_modeler.html">Automating Complex Workflows using Processing Modeler</a></li>
<li class="toctree-l1"><a class="reference internal" href="automating_map_creation.html">Automating Map Creation with Print Composer Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_qgis_browser.html">使用 QGIS Browser</a></li>
<li class="toctree-l1"><a class="reference internal" href="counting_vertices.html">計算向量圖層中的多邊形頂點數</a></li>
<li class="toctree-l1"><a class="reference internal" href="open_bil_bip_bsq_files.html">Open BIL, BIP or BSQ files in QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started_with_pyqgis.html">Python 程式設計的初步上手</a></li>
<li class="toctree-l1"><a class="reference internal" href="building_a_python_plugin.html">以 Python 製作附加元件</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom_python_functions.html">Using Custom Python Expression Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_python_scripts.html">Writing Python Scripts for Processing Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="running_qgis_jobs.html">Running and Scheduling QGIS Processing Jobs</a></li>
<li class="toctree-l1"><a class="reference internal" href="find_neighbor_polygons.html">Find Neighbor Polygons in a Layer</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_table_joins_pyqgis.html">Performing Table Joins (PyQGIS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="leaflet_maps_with_qgis2leaf.html">Leaflet Web Maps with qgis2leaf</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_gme_connector.html">Using Google Maps Engine Connector for QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="learning_resources.html">QGIS 學習資源</a></li>
<li class="toctree-l1"><a class="reference internal" href="credits.html">資料來源</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="digitizing_basics.html" title="Previous Chapter: 把地圖數位化"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; 把地圖數位化</span>
    </a>
  </li>
  <li>
    <a href="performing_spatial_joins.html" title="Next Chapter: Performing Spatial Joins"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Performing Spati... &raquo;</span>
    </a>
  </li>
              
            
            

            

            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><h4>Author</h4>
<p>Ujaval Gandhi</p>
<a href="https://twitter.com/intent/follow?screen_name=spatialthoughts" class="twitter-follow-button" data-show-count="false">Follow @spatialthoughts</a>

<h4>Change Language</h4>
<form role="form" class="sidebar-form sidebar-left">
<select id="languages" class="form-control select-mini">
  <option value="en">English</option>
  <option value="zh_TW">Chinese (Taiwan)</option>
  <option value="nl">Dutch</option>
  <option value="fi_FI">Finnish</option>
  <option value="fr">French</option>
  <option value="de">German</option>
  <option value="el">Greek</option>
  <option value="id">Indonesian</option>
  <option value="it">Italian</option>
  <option value="ko">Korean</option>
  <option value="pt_BR">Portuguese</option>
  <option value="ro">Romanian</option>
  <option value="ru">Russian</option>
  <option value="es">Spanish</option>
  <option value="th">Thai</option>
  <option value="uk">Ukrainian</option>
  <option value="vi">Vietnamese</option>
</select>
</form>



  


<h4>Share</h4>
<div class="addthis_sharing_toolbox"></div>
        </div>
      </div>
    <div class="col-md-9">
      

  <div class="section" id="performing-table-joins">
<h1>連接資料表<a class="headerlink" href="#performing-table-joins" title="Permalink to this headline">¶</a></h1>
<p>你想要用的資料集可能不是 shapefile，或是任何一種空間資料格式。這些資料的格式往往是表格或試算表，要把它們加入你的資料分析中，必須讓它們和你手上的空間資料產生關聯。操作這件事情稱為`連接資料表`。這篇教學會說明 QGIS 如何將資料表連接起來。</p>
<div class="section" id="overview-of-the-task">
<h2>內容說明<a class="headerlink" href="#overview-of-the-task" title="Permalink to this headline">¶</a></h2>
<p>我們會使用美國加州的人口統計分區 shapefile，與美國人口調查局提供的人口數資料表，做一份加州的人口分佈圖。</p>
<div class="section" id="other-skills-you-will-learn">
<h3>你還會學到這些<a class="headerlink" href="#other-skills-you-will-learn" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="first">為 CSV 檔案製作一份 <cite>.csvt</cite> 檔案，以註明各欄位的資料型態。</p>
</li>
<li><p class="first">在 QGIS 中載入不含任何地理資訊的 CSV 檔案。</p>
</li>
</ul>
</div>
</div>
<div class="section" id="get-the-data">
<h2>取得資料<a class="headerlink" href="#get-the-data" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://www.census.gov/geo/maps-data/data/tiger.html">美國人口調查局</a>提供多種從 MAF/TIGER 資料庫匯出的空間資料。你可以查詢並下載加州的人口統計分區 shapefile。下載 <a class="reference external" href="http://www2.census.gov/geo/tiger/TIGER2013/TRACT/tl_2013_06_tract.zip">Census Tracts for California</a> 這個檔案。</p>
<p><a class="reference external" href="http://factfinder2.census.gov/faces/nav/jsf/pages/searchresults.xhtml?refresh=t">Americal FactFinder</a> 提供所有美國的人口統計資料。你可以用「進階搜尋」（<cite>Advanced Search</cite>），查詢 <cite>Topic - Total Population</cite> 與 <cite>Geographies - All Census Tracts in California</cite>，以建立並下載我們需要的 CSV 檔案。以下教學使用 <cite>Total Population 2010 Census Summary File 1</cite> 這份資料。</p>
<p>為了方便起見，你也可以直接用下面的連結下載這兩份資料集：</p>
<p><a class="reference external" href="http://www.qgistutorials.com/downloads/tl_2013_06_tract.zip">tl_2013_06_tract.zip</a></p>
<p><a class="reference external" href="http://www.qgistutorials.com/downloads/ca_tracts_pop.csv">ca_tracts_pop.csv</a></p>
<p>資料來源 <a class="reference internal" href="credits.html#tiger" id="id1">[TIGER]</a> <a class="reference internal" href="credits.html#uscensus" id="id2">[USCENSUS]</a></p>
</div>
<div class="section" id="procedure">
<h2>操作流程<a class="headerlink" href="#procedure" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li><p class="first">我們先載入人口統計分區 shapefile。選擇 <span class="menuselection">圖層 ‣ 加入向量圖層</span>。</p>
</li>
</ol>
<img alt="../_images/1104.png" class="align-center" src="../_images/1104.png" />
<ol class="arabic simple" start="2">
<li><p class="first">瀏覽並選擇載下來的 <code class="docutils literal"><span class="pre">tl_2013_06_tract.zip</span></code> 壓縮檔。QGIS 可以直接開啟壓縮檔，所以檔案不用事先解壓縮。</p>
</li>
</ol>
<img alt="../_images/249.png" class="align-center" src="../_images/249.png" />
<ol class="arabic simple" start="3">
<li><p class="first">選擇 <code class="docutils literal"><span class="pre">tl_2013_06_tract.zip</span></code> 圖層並點擊 <span class="guilabel">OK</span>。</p>
</li>
</ol>
<img alt="../_images/329.png" class="align-center" src="../_images/329.png" />
<ol class="arabic simple" start="4">
<li><p class="first">你會看到 QGIS 載入了人口統計分區資料。</p>
</li>
</ol>
<img alt="../_images/421.png" class="align-center" src="../_images/421.png" />
<ol class="arabic simple" start="5">
<li><p class="first">用右鍵點擊圖層，選擇 <span class="guilabel">開啟屬性表格</span>。</p>
</li>
</ol>
<img alt="../_images/522.png" class="align-center" src="../_images/522.png" />
<ol class="arabic simple" start="6">
<li><p class="first">檢視分區 shapefile 的屬性。要把表格資料與這份 shapefile 相關聯，圖層中的每個圖徵都需要一個具識別性的屬性。在這個例子，<strong>GEOID</strong> 屬性可以識別每一個分區，這就可以把這份 shapefile 與任何包含同樣 ID 的表格資料「連接」起來。</p>
</li>
</ol>
<img alt="../_images/621.png" class="align-center" src="../_images/621.png" />
<ol class="arabic simple" start="7">
<li><p class="first">用文字編輯器開啟 <code class="docutils literal"><span class="pre">ca_tracts_pop.csv</span></code> 這份 CSV 檔案。你會注意到，檔案中的每一列都含有關於某個分區的資訊，其中就有我們在上一步驟看到的識別屬性。注意在這份 CSV 中，這個識別屬性欄位叫作 <strong>GEO.id2</strong>。你還會注意到 <strong>D001</strong> 這個欄位記錄了每個分區的人口數。</p>
</li>
</ol>
<img alt="../_images/720.png" class="align-center" src="../_images/720.png" />
<ol class="arabic simple" start="8">
<li><p class="first">我們可以不做任何加工，直接匯入這份 CSV 檔案。不過，這樣一來每個欄位預設的資料型態會是「字串」（文字）。這樣通常沒有問題，除了像 <cite>D001</cite> 這樣包含人口數字的欄位。如果這些數字欄位被當作文字匯入，我們就不能拿這些欄位做數學計算。要讓 QGIS 把這些欄位當作數字匯入，我們必須建立一個 <cite>.csvt</cite> 的附加檔案。這個附加檔案只會有一列內容，用來指定每一欄位的資料型態。我們把這個附加檔案命名為 <code class="docutils literal"><span class="pre">ca_tracts_pop.csvt</span></code>，儲存到原本的 <cite>.csv</cite> 檔案所在的目錄。你也可以<a class="reference external" href="../../downloads/ca_tracts_pop.csvt">從這裡下載這個 csvt 檔案。</a></p>
</li>
</ol>
<img alt="../_images/819.png" class="align-center" src="../_images/819.png" />
<ol class="arabic simple" start="9">
<li><p class="first">我們可以把 CSV 檔案匯入 QGIS 了。選擇 <span class="menuselection">圖層 ‣ 加入分隔文字圖層</span>。</p>
</li>
</ol>
<img alt="../_images/917.png" class="align-center" src="../_images/917.png" />
<ol class="arabic simple" start="10">
<li><p class="first">瀏覽 CSV 檔所在的目錄，點選它。注意 <span class="guilabel">檔案格式</span> 要選擇 <span class="guilabel">CSV (comma separated values)</span>。這份資料是單純的表格，所以我們得註明檔案中不包含地理資訊。選擇 <span class="guilabel">No geometry (attribute only table)</span> ，再點選 <span class="guilabel">OK</span>。</p>
</li>
</ol>
<img alt="../_images/1018.png" class="align-center" src="../_images/1018.png" />
<ol class="arabic simple" start="11">
<li><p class="first">這樣，CSV 檔案就被匯入 QGIS 裡成為一份表格。</p>
</li>
</ol>
<img alt="../_images/1122.png" class="align-center" src="../_images/1122.png" />
<ol class="arabic simple" start="12">
<li>Select the <code class="docutils literal"><span class="pre">tl_2013_06_tract</span></code> layer. Right-click on it and select
<span class="guilabel">Properties</span>.</li>
</ol>
<img alt="../_images/1220.png" class="align-center" src="../_images/1220.png" />
<ol class="arabic simple" start="13">
<li>In the <span class="guilabel">Layer Properties</span> dialog, select the <span class="guilabel">Joins</span>
tab. Click on the <cite>+</cite> button at the bottom to create a new table join.</li>
</ol>
<img alt="../_images/1318.png" class="align-center" src="../_images/1318.png" />
<ol class="arabic simple" start="14">
<li>In the <span class="guilabel">Add vector join</span> dialog, select <code class="docutils literal"><span class="pre">ca_tracts_pop</span></code> as the
<span class="guilabel">Join layer</span>. Next we have to select the field with unique ids in
both the shapefile and the CSV. Select <cite>GEO.id2</cite> and <cite>GEOID</cite> as the
<span class="guilabel">Join field</span> and <span class="guilabel">Target field</span> respectively. Click
<span class="guilabel">OK</span>.</li>
</ol>
<img alt="../_images/1417.png" class="align-center" src="../_images/1417.png" />
<ol class="arabic simple" start="15">
<li>Close the <span class="guilabel">Layer Properties</span> dialog and return to the main QGIS
window. At this point, the fields from the CSV file are joined with the
shapefile. Right-click on the <code class="docutils literal"><span class="pre">tl_2013_06_tract</span></code> layer and select
<span class="guilabel">Open Attribute Table</span>.</li>
</ol>
<img alt="../_images/1516.png" class="align-center" src="../_images/1516.png" />
<ol class="arabic simple" start="16">
<li>You can now see a new set of fields, including
<span class="guilabel">ca_tracts_pop_D001</span> field added to each feature. Now you have
access to the population value of each tract from the CSV file. Close the
attribute table and return to the main QGIS window.</li>
</ol>
<img alt="../_images/1615.png" class="align-center" src="../_images/1615.png" />
<ol class="arabic simple" start="17">
<li>Right-click the <code class="docutils literal"><span class="pre">tl_2013_06_tract</span></code> layer and select <span class="guilabel">Properties</span>.</li>
</ol>
<img alt="../_images/1714.png" class="align-center" src="../_images/1714.png" />
<ol class="arabic simple" start="18">
<li>Select the <span class="guilabel">Style</span> tab. Select the <span class="guilabel">Graduated</span> from the
drop-down menu. As we are looking to create a population map, we want to
assign different color to each census tract feature based on the population
count. Select <span class="guilabel">ca_tracts_pop_D001</span> as the <span class="guilabel">Column</span>.
Select a color ramp of your liking from the <span class="guilabel">Color ramp</span>
drop-down. In the <span class="guilabel">Mode</span>, select <span class="guilabel">Quantile (Equal
Count)</span>. Next click <span class="guilabel">Classify</span>. You will see a different color
assigned to certain population ranges. Click <span class="guilabel">OK</span>.</li>
</ol>
<img alt="../_images/1814.png" class="align-center" src="../_images/1814.png" />
<ol class="arabic simple" start="19">
<li>You will now see a nice visualization of the census tracts as styled using
population values. Use the <span class="guilabel">Zoom in</span> tool to select a smaller
area from the layer.</li>
</ol>
<img alt="../_images/1912.png" class="align-center" src="../_images/1912.png" />
<ol class="arabic simple" start="20">
<li>You have a detailed and accurate population map of California. You can use
the same technique to create maps based on variety of census data.</li>
</ol>
<img alt="../_images/209.png" class="align-center" src="../_images/209.png" />
</div>
</div>





  <div id="disqus_thread"></div>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


    </div>
      
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2015, Ujaval Gandhi.<br/>
      最後更新日期是 Apr 22, 2016.<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.6.<br/>
    </p>
  </div>
</footer>
<!-- Twitter Button -->
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

<!-- Disqus comments widget -->
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'qgistutorials'; // required: replace example with your forum shortname
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  }());
</script>

<script type="text/javascript">
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>

<!-- Go to www.addthis.com/dashboard to customize your tools -->
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=spatialthoughts" async="async"></script>

<!-- Script fpr language switching. Largely adapted from https://github.com/pcav/faunalia-website -->
<script>
    var currentPage = 'docs/performing_table_joins.html'; // coming from sphinx, always without starting '/'
    var currentLang = 'en';
    $(document).ready(function(){

        var search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
        var langPlusPage = window.location.href.match(search);
        // it's possible this is a index.html page called without 'index.html', try without the currentPage
        if (langPlusPage==undefined){
            search = new RegExp('\/[a-zA-Z_]{2,8}\/$', 'gi');
            langPlusPage = window.location.href.match(search);
        }

        // it's possible this is an index.html page called without 'index.html', try removing index.html
        if (langPlusPage==undefined){
            currentPage = currentPage.replace('index.html','')
            search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
            langPlusPage = window.location.href.match(search);
        }
        // still no langPlugPage: stop, because the language swicher will misbehave 

        if (langPlusPage == undefined || langPlusPage.length != 1){
            alert('You hit an error, please report back to us.');
            return;
        }
        langPlusPage = langPlusPage[0];
        currentLang = langPlusPage.replace(currentPage, '');

        $("#languages").val(currentLang.replace(/\//g,'')); // currentLang is something like '/nl/'

        $("#languages").change(function() {
            gotoLang($(this).val());
        });

    });

    // load current page in a different language
    function gotoLang(lang){
        var currentUrl = window.location.href;
        var newUrl = currentUrl.replace(currentLang, '/'+lang+'/');
        window.location.href = newUrl;
    }
</script>

  </body>
</html>